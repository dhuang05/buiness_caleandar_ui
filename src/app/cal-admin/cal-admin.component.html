<div class="outmost">
  <table style="width:100%;">
    <tr class="header-title" style="width:100%;">
      <td>&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
      </td>
      <td style = "width; 95%;"><div style="text-align: center;"><span>Business Calendar Administration</span></div></td>
      <td style="text-align: right;">
        &nbsp;<a *ngIf="selectedCalendarInst && isContentChanged" class = "alink" style = "color: darkred;" href="#" (click)="saveCalednar()">Save</a>
        &nbsp;<span *ngIf="selectedCalendarInst && isContentChanged" style="color:rgba(255, 255, 255, 0.541); font-size: 14px;">|</span>&nbsp;
        <a *ngIf="selectedCalendarInst" class = "alink" href="#" (click)="testCalednar()">Test</a>
        &nbsp;<span *ngIf="selectedCalendarInst" style="color:rgba(255, 255, 255, 0.541); font-size: 14px;">|</span>&nbsp;
        <cal-logout ></cal-logout>&nbsp;<span style="color:rgba(255, 255, 255, 0.541); font-size: 14px;">|</span>&nbsp;
        <a class = "alink" href="#" (click)="resetPassword($event)"><span>Reset password</span>&nbsp;</a>
      </td>
    </tr>
  </table>

  <table style="width:100%; ">
    <tr>
      <td style="vertical-align:top; width:260px;">
        <div style="vertical-align: top;">
          <div class="list-item">
            <button class="button" (click)="newCalendarInstance($event)">Create Calendar from template</button>
          </div>
          <div class="list-item" *ngFor="let businessCalendarOwnership of businessCalendarOwnerships; index as i">
            <button class="button"
              (click)="fetchCalendarInstance(businessCalendarOwnership)">{{businessCalendarOwnership.description}}</button>
          </div>
        </div>
      </td>
      <td style="vertical-align: top;">
        <div *ngIf="selectedCalendarInst" style="padding:4px; width:100%; border: 1px solid rgb(33, 58, 33)">
          <div>
            <span>{{message}}</span>
          </div>
          <h2>Calendar Edit Pane</h2>
          <div>
            <mat-form-field appearance="legacy">
              <mat-label>Calendar Name</mat-label>
              <input matInput (change) = "isChanged()" class="input" name="cal_name" type="text" [(ngModel)]="selectedCalendarInst.desc" />
            </mat-form-field>
            <mat-form-field appearance="legacy">
              <mat-label>Timezone</mat-label>
              <mat-select (change) = "isChanged()" [(ngModel)]="selectedCalendarInst.timeZone">
                <mat-option><span style="color:red">please select</span></mat-option>
                <mat-option *ngFor="let timezone of timezones" [value]="timezone">{{timezone}}</mat-option>
              </mat-select>
            </mat-form-field>
          </div>
          <div style="width:100%;">
            <div>
              <h3>Weekly Working Hour</h3>
            </div>
            <div class="flow-layout">
              <div class="weekly-workinghour-block" *ngFor="let businessHour of selectedWeeklyBusinessHours">
                <cal-weekly-workinghour [businessHour]="businessHour" (changedEvent) = "isChanged()" ></cal-weekly-workinghour>
              </div>
            </div>

          </div>
          <div>
            <h3>Special Working Hour</h3>
            <div class="flow-layout" *ngFor="let specialBusinessHours of specialBusinessHourChunks; let i = index;">
              <div class="special-workinghour-block" *ngFor="let businessHour of specialBusinessHours; let j = index;"
                style="vertical-align: top;">
                <cal-special-workinghour [businessHour]="businessHour" (changedEvent) = "isChanged()" 
                  (deleteEvent)="deleteSpecialBusinessHour($event)"></cal-special-workinghour>
              </div>
              <div *ngIf="i == (specialBusinessHourChunks.length - 1)">
                <a href="#" (click)="addSpecialBusinessHour()">
                  <mat-icon style="font-size:14px; color: rgb(49, 218, 181);">add</mat-icon>
                </a>
              </div>
            </div>
            <div *ngIf="!specialBusinessHourChunks || specialBusinessHourChunks.length == 0">
              <a href="#" (click)="addSpecialBusinessHour()">
                <mat-icon style="font-size:14px; color: rgb(49, 218, 181);">add</mat-icon>
              </a>
            </div>
          </div>
          <div>
            <h3>Holiday Rules</h3>
            <div class="flow-layout" *ngFor="let holidayRules of holidayChunks; let i = index;">
              <div class="holiday-rule-block" *ngFor="let holidayRule of holidayRules; let j = index;"
                style="vertical-align: top;">
                <cal-holiday-definition [holidayRule]="holidayRule" (deleteEvent)="deleteHolidayRule($event)" (changedEvent) = "isChanged()" >
                </cal-holiday-definition>
              </div>
              <div *ngIf="i == (holidayChunks.length - 1)">
                <a href="#" (click)="addHolidayRule()">
                  <mat-icon style="font-size:14px; color: rgb(49, 218, 181);">add</mat-icon>
                </a>
              </div>
            </div>
            <div *ngIf="!holidayChunks || holidayChunks.length == 0">
              <a href="#" (click)="addHolidayRule()">
                <mat-icon style="font-size:14px; color: rgb(49, 218, 181);">add</mat-icon>
              </a>
            </div>
          </div>
        </div>
      </td>
    </tr>
  </table>
</div>